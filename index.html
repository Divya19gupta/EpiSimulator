<pre><font color="#007f69">turtles-own</font><font color="#000000"> [days-after-exposure days-of-sick quarantined age] <br /></font><font color="#007f69">Patches-own</font><font color="#000000"> [] <br /></font><font color="#007f69">Globals</font><font color="#000000"> [lifespan]  <br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup <br /></font><font color="#0000aa">clear-all</font><font color="#000000"> <br />setup-turtles <br />setup-patches <br />add-a-carrier<br />update-display<br /></font><font color="#0000aa">set</font><font color="#000000"> lifespan </font><font color="#963700">70</font><font color="#000000"><br /></font><font color="#0000aa">reset-ticks</font><font color="#000000"> <br /></font><font color="#007f69">end</font><font color="#000000">  <br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup-turtles <br /></font><font color="#0000aa">create-turtles</font><font color="#000000"> population-size <br />[<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">68</font><font color="#000000"> <br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">1.75</font><font color="#000000"> <br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;person&quot;</font><font color="#000000"> <br />    </font><font color="#0000aa">set</font><font color="#000000"> age </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">70</font><font color="#000000"><br />    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> days-after-exposure </font><font color="#963700">0</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> days-of-sick </font><font color="#963700">0</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> mobility </font><font color="#963700">1</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> quarantined </font><font color="#963700">false</font><font color="#000000"><br />] <br /></font><font color="#007f69">end</font><font color="#000000">  <br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup-patches <br /></font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">] <br /></font><font color="#007f69">end</font><font color="#000000">    <br /><br /></font><font color="#007f69">to</font><font color="#000000"> go<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> incubation-period </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">] </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [</font><font color="#0000aa">stop</font><font color="#000000">]<br />  move<br />  </font><font color="#0000aa">if</font><font color="#000000"> quarantine [ apply-quarantine ]<br />  </font><font color="#0000aa">if</font><font color="#000000"> vaccinations [vaccination]<br />  transmission<br />  incubation<br />  sickness<br />  age-tracking<br />  update-display<br />  </font><font color="#0000aa">tick</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> move<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">shape</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;person&quot;</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> quarantined] [<br />     </font><font color="#0000aa">right</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000"><br />     </font><font color="#0000aa">forward</font><font color="#000000"> mobility </font><font color="#660096">*</font><font color="#000000"> age-based-mobility<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> add-a-carrier<br /></font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"><br />[</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">orange</font><font color="#000000"><br />]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> transmission<br /></font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">orange</font><font color="#000000"> ]<br />[</font><font color="#0000aa">let</font><font color="#000000"> susceptible-person </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">68</font><font color="#000000">]<br /></font><font color="#0000aa">if</font><font color="#000000"> susceptible-person </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"><br />[</font><font color="#0000aa">ask</font><font color="#000000"> susceptible-person<br />[<br />        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> transmission-rate </font><font color="#660096">*</font><font color="#000000"> (</font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> vaccination-effectiveness) </font><font color="#660096">*</font><font color="#000000"> age-based-susceptibility<br />[</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">orange</font><font color="#000000">]<br />]<br />]<br />]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> incubation<br /></font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">orange</font><font color="#000000">]<br />[</font><font color="#0000aa">ifelse</font><font color="#000000"> days-after-exposure </font><font color="#660096">&lt;</font><font color="#000000"> incubation-period<br />[</font><font color="#0000aa">set</font><font color="#000000"> days-after-exposure days-after-exposure </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br />[</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;person&quot;</font><font color="#000000">]<br />]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> sickness<br /></font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">]<br />[</font><font color="#0000aa">ifelse</font><font color="#000000"> days-of-sick </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">14</font><font color="#000000"><br />[</font><font color="#0000aa">set</font><font color="#000000"> days-of-sick days-of-sick </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br />[</font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> age-based-mortality<br />[<br />        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000"><br />        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;person&quot;</font><font color="#000000"><br />        </font><font color="#0000aa">set</font><font color="#000000"> mobility </font><font color="#963700">0</font><font color="#000000">]<br />[<br /></font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"><br /></font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;person&quot;</font><font color="#000000"><br /></font><font color="#0000aa">set</font><font color="#000000"> quarantined </font><font color="#963700">false</font><font color="#000000"><br /></font><font color="#0000aa">set</font><font color="#000000"> mobility </font><font color="#963700">1</font><font color="#000000"><br />]<br />]<br />]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> vaccination<br />  </font><font color="#0000aa">let</font><font color="#000000"> num-of-susceptible </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">68</font><font color="#000000">]<br />  </font><font color="#0000aa">let</font><font color="#000000"> num-of-vaccinated num-of-susceptible </font><font color="#660096">*</font><font color="#000000"> vaccination-rate </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">0.01</font><font color="#000000"><br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">n-of</font><font color="#000000"> num-of-vaccinated </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">68</font><font color="#000000">] [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> apply-quarantine<br /></font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> quarantined]<br />[ </font><font color="#0000aa">set</font><font color="#000000"> quarantined </font><font color="#963700">true</font><font color="#000000"><br /></font><font color="#0000aa">set</font><font color="#000000"> mobility </font><font color="#963700">0</font><font color="#000000"><br /></font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;house&quot;</font><font color="#000000"><br />]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> age-tracking<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [<br />    </font><font color="#0000aa">set</font><font color="#000000"> age age </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />    </font><font color="#0000aa">if</font><font color="#000000"> age </font><font color="#660096">&gt;</font><font color="#000000"> lifespan [ </font><font color="#0000aa">die</font><font color="#000000"> ]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> update-display<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [<br />  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> </font><font color="#660096">ifelse-value</font><font color="#000000"> show-age [ </font><font color="#660096">floor</font><font color="#000000"> (age) ] [ </font><font color="#963700">&quot;&quot;</font><font color="#000000"> ]  ]<br />  </font><font color="#0000aa">stop-inspecting-dead-agents</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> watch-a-person </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">subject</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"><br />    [ </font><font color="#0000aa">watch</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">hidden?</font><font color="#000000"> ]<br />    </font><font color="#0000aa">clear-drawing</font><font color="#000000"><br />    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">subject</font><font color="#000000"> [ </font><font color="#0000aa">pen-down</font><font color="#000000"> ]<br />    </font><font color="#0000aa">inspect</font><font color="#000000"> </font><font color="#660096">subject</font><font color="#000000"><br />  ]<br /><br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> watch-a-person </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">subject</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [<br />    </font><font color="#0000aa">stop-inspecting</font><font color="#000000"> </font><font color="#660096">subject</font><font color="#000000"><br />    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">subject</font><font color="#000000"> [<br />      </font><font color="#0000aa">pen-up</font><font color="#000000"><br />    ]<br />    </font><font color="#0000aa">clear-drawing</font><font color="#000000"><br />    </font><font color="#0000aa">reset-perspective</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> age-based-mobility<br />  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">ifelse-value</font><font color="#000000"> (age </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">18</font><font color="#000000">) [</font><font color="#963700">1.5</font><font color="#000000">] [</font><font color="#660096">ifelse-value</font><font color="#000000"> (age </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">55</font><font color="#000000">) [</font><font color="#963700">1.0</font><font color="#000000">] [</font><font color="#963700">0.5</font><font color="#000000">]]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> age-based-susceptibility<br />  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">ifelse-value</font><font color="#000000"> (age </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">18</font><font color="#000000">) [</font><font color="#963700">1.2</font><font color="#000000">] [</font><font color="#660096">ifelse-value</font><font color="#000000"> (age </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">55</font><font color="#000000">) [</font><font color="#963700">1.0</font><font color="#000000">] [</font><font color="#963700">1.5</font><font color="#000000">]]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> age-based-mortality<br />  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">ifelse-value</font><font color="#000000"> (age </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">18</font><font color="#000000">) [</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mortality] [</font><font color="#660096">ifelse-value</font><font color="#000000"> (age </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">55</font><font color="#000000">) [mortality] [</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mortality]]<br /></font><font color="#007f69">end</font>
</pre>
